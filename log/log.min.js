var log=new function(){var t=[],e=[],o=-1,i=1
this.logAction=function(s,l,g,a,r){function c(t){return t.getFullYear()+"-"+t.getMonth()+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()}var u,h=new Date
if(a==o){var d={}
d.key=r,d.timestamp=h,e.push(d)}else if(a==i){for(var f=0;f<e.length&&e[f].key!=r;)f++
if(e[f]&&e[f].key==r){var d=e.pop(e[f]),p=d.timestamp
u=36e5*(h.getHours()-p.getHours())+6e4*(h.getMinutes()-p.getMinutes())+1e3*(h.getSeconds()-p.getSeconds())+(h.getMilliseconds()-p.getMilliseconds())}}t&&t.push([s,l,g,c(h),u?u:"NULL"]),(t.length>2||"end"==l||"stop"==l)&&(n(),t=[])}
var n=function(){$.ajax({type:"POST",url:"http://knowledgear.com/log/log.php",data:{json:JSON.stringify(t)},dataType:"json",crossDomain:!0}).done(function(){console.log("done")}).fail(function(){console.log("fail")})}}
